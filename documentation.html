<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="assets/favicons/mini_totoro_Favicon/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="assets/favicons/mini_totoro_Favicon/favicon-16x16.png" sizes="16x16" />
    <link rel="stylesheet" href="styles/normalize.css">
    <link rel="stylesheet" href="styles/docuStyle.css">

    <title>Project 2 Documentation</title>
</head>

<body>
    <header>
        <h1>Project 2 Documentation</h1>
    </header>
    <main>
        <div id=flexGallery>
            <img class="growImage" id="prototype" src="images/sketch.jpg" alt="The initial sketch">
            <img class="growImage" id="finalPage" src="images/Capture.PNG" alt="The final-ish version">
        </div>

        <p>The assignment was to create "a JavaScript driven Web application that utilizes a Web service".
            I chose to use the Studio Ghibli API to create a searchable catalog that would enable a user
            to search by things like title, keyword, date, director, etc.
        </p>

        <div id="chunk">
            <b>HTML and Structure:</b>
            <p>First I decided I wouldn't go overboard on the content that is initially displayed.
                Most of the content is dynamically created in the JavaScript, so the actual index document is pretty
                small.
                Then I considered the search parameters I would add. I wanted to at least be able to search by keywords,
                title, the date of release and maybe the director since I couldn't think of anything else to search a
                movie by.
                Originally there was going to just be the one dropdown, but now there are two. One is for deciding what
                to search whatever is typed into the text input by, keywords vs title, and the other is a filter for the
                results.
            </p>
            <p>The HTML is composed of the usual header, main and footer elements, obviously. The header contains
                the text for the title, the image tag for the logo and an empty div that is used to hold the secondary
                image
                for when the time comes. The main element has two sections: the search and results areas which are divs
                that stack on top of each other.

                The output div inside of the results div holds the spot for the results to be generated by the
                JavaScript.

            </p>
            <p></p>

            <b>CSS and Design:</b>
            <p>
                The header is a grid container that holds the logo and title. The idea is that when the viewport shrinks
                to a certain
                size, 800px, the large logo is replaced by a vertical version of the Studio Ghibli logo with only the
                text to minimize
                the amount of space taken up by the logo. Then, because there is some new blank space in the head,
                another image is tucked
                beneath the title.
            </p>
            <p>
                The output div is a flexbox container that flows columnwise with each result produced by the search as a
                child. The results
                are formatted as individual card-like elements on the page, with a differently colored background and a
                small drop shadow to
                make them pop.
            </p>

            <b>JavaScript and API Use:</b>
            <p>I used JavaScript to enhance my page's responsiveness by adding a media query that uses the
                <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window"><code>window.matchMedia()</code></a>
                method to detect when the viewport gets bigger or smaller than 800px. At this point the page toggles
                between headers, one is
                made for larger viewports and the other is suited for smaller viewports. When the browser gets smaller
                than 800px it switches the logo's
                <code>src</code> to change it to the vertical version and injects an <code>img</code> element into the
                empty div which is what gives us the
                image of the three totoros next to each other beneath the title text.
            </p>
            <p>The filter elements were also made dynamically by the script. Initially, because the default value of the
                filter dropdown is none, there are no
                elements to interact with yet. Once the user selects the filter option, the script then creates the
                appropriate interactive elements and puts it into
                the HTML. An interesting thing to note is that the date dropdowns are created based on the current year.
                It starts at the year of Studio Ghibli's founding, 1985,
                and ends at the current year by using a <code>Date</code> object to determine the year. From then it's a
                matter of creating each dropdown element in a for loop
                going from 1985 to whatever the code produces as the current year.
            </p>
            <p>Because there was no apparent search function in the API itself, I wrote my own search methods that
                simply took the film list
                that was returned by the API's endpoint and looped through it, comparing each item with the specific set
                of parameters provided
                by each method and pushed them onto a new array that would be returned by the search function once it
                was done looping. Then that newly created
                array was passed into a function that also looped through the given array and from the individual items
                extracted the appropriate information
                and used that to build up individual HTML elements that would be appended into the output div.
            </p>
            <p>Once the submit button was clicked the script would build up a search URL that would then be used to make
                a request to the API, which I determined would, most of the time,
                just return with the entire list of Ghibli movies. So by using the returned list and putting them
                through my own search functions I was able to get actual results. The returned list
                goes through at least one search function, the title and/or keyword search and if there is a filter then
                the results created by the first search is put through the matching
                filter function. After all that is done the results are created and printed to the page, if there are
                any results after the search and filter process.
            </p>
        </div>

<p></p>

        <i style="font-size: 14px">*One thing to note is that there is a loading gif that may or may not work as a loading icon, but the results
            are always returned so
            quickly I can't tell if it works.
        </i>

        <div id="myModal" class="modal">
            <span class="close">&times;</span>
            <img class="modal-content" id="img01">
            <div id="caption"></div>
        </div>
    </main>
    <footer>
        <a href="rubric.pdf">Rubric</a><br>
        <a href=" https://github.com/dccircuit/IGME-235-Fall-2020/blob/master/projects/project-2.md">Project
            specs</a><br>
        <a href="https://ghibliapi.herokuapp.com/">Studio Ghibli API</a><br>
        <a href="https://people.rit.edu/aam6039/235/project2/index.html">Ghibli Movie Catalog</a><br>
    </footer>
    <script>
        // Get the modal
        let modal = document.querySelector("#myModal");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        let img1 = document.querySelector("#prototype");
        let img2 = document.querySelector("#finalPage");
        let modalImg = document.querySelector("#img01");
        let captionText = document.querySelector("#caption");
        img1.onclick = growTheImage;
        img2.onclick = growTheImage;
        function growTheImage() {
            modal.style.display = "block";
            modalImg.src = this.src;
            captionText.innerHTML = this.alt;
        }

        // Get the <span> element that closes the modal
        let span = document.getElementsByClassName("close")[0];
        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
    </script>
</body>

</html>